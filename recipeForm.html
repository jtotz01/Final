<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans&family=Poppins:wght@100;300&family=Yellowtail&display=swap" rel="stylesheet">
    <style type="text/css">

    .title {
        text-align: center;
        font-family: 'Poppins';
        font-weight: 600;
        font-size: 35px;
        padding-block: 25px;
    }
    img{
        border: 1px solid black;
        }
    .summary, .url {
        font-family: 'PT Sans', sans-serif;
        font-size: 25px;
        padding-left: 100px;
        padding-right: 100px;
    }

    .url {
        font-family: 'PT Sans', sans-serif;
        font-size: 25px;
    }

    h1 {
        font-family: 'Poppins';
    }



    </style>


    <title>
        Recipes Form
    </title>
    <meta charset = "utf-8">
    <script>
    //Starts the function 
    function start()
    {
        verify();
    }
    //Verifies Form that there is a search for food
    function verify()
    {
        let x = document.getElementsByName("foodSearch")[0].value;
        let y = document.getElementsByName("cuisineSearch")[0].value;
        let z = document.getElementsByName("dietSearch")[0].value;
        
        if(x != "")
        {
            search(x, y, z);
            return true;
        }
        else 
        {
            alert("You must input a food search!");
            return false;
        }
    }
    
    function allergy()
    {
        var allergiesFinal = "";
    
        if(document.getElementById("dairy").checked == true)
        {
            allergiesFinal += "dairy%2C";
        }
        if(document.getElementById("egg").checked == true)
        {
            allergiesFinal += "egg%2C";
        }
        if(document.getElementById("peanut").checked == true)
        {
            allergiesFinal += "peanut%2C";
        }
        if(document.getElementById("sesame").checked == true)
        {
            allergiesFinal += "sesame%2C";
        }
        if(document.getElementById("seafood").checked == true)
        {
            allergiesFinal += "seafood%2C";
        }
        if(document.getElementById("shellfish").checked == true)
        {
            allergiesFinal += "shellfish%2C";
        }
        if(document.getElementById("soy").checked == true)
        {
            allergiesFinal += "soy%2C";
        }
        if(document.getElementById("sulfite").checked == true)
        {
            allergiesFinal += "sulfite%2C";
        
        }
        if(document.getElementById("tree").checked == true)
        {
            allergiesFinal += "tree%2C";
            
        }
        if(document.getElementById("wheat").checked == true)
        {
            allergiesFinal += "wheat%2C";
        }
        
        if(allergiesFinal != "")
        {
            allergiesFinal = "&intolerances=" + allergiesFinal;
        }
        return allergiesFinal;
    }
    
    function search(search, cuisine, diet)
    {
        
        var allergiesFinal = allergy();
        const data = null;
    
    const xhr = new XMLHttpRequest();
    xhr.withCredentials = false;
    
    xhr.addEventListener("readystatechange", function () {
        if (this.readyState === this.DONE) {
            console.log(this.responseText);
            theData = xhr.responseText;
            dataFinal = JSON.parse(theData);
            
            document.getElementById("title1").innerHTML = dataFinal["results"][0]["title"];
            document.getElementById("summary1").innerHTML = dataFinal["results"][0]["summary"];
            document.getElementById("url1").innerHTML = dataFinal["results"][0]["sourceUrl"];
            
            document.getElementById("title2").innerHTML = dataFinal["results"][1]["title"];
            document.getElementById("summary2").innerHTML = dataFinal["results"][1]["summary"];
            document.getElementById("url2").innerHTML = dataFinal["results"][1]["sourceUrl"];
            
            document.getElementById("title3").innerHTML = dataFinal["results"][2]["title"];
            document.getElementById("summary3").innerHTML = dataFinal["results"][2]["summary"];
            document.getElementById("url3").innerHTML = dataFinal["results"][2]["sourceUrl"];
            
            document.getElementById("title4").innerHTML = dataFinal["results"][3]["title"];
            document.getElementById("summary4").innerHTML = dataFinal["results"][3]["summary"];
            document.getElementById("url4").innerHTML = dataFinal["results"][3]["sourceUrl"];
            
            document.getElementById("title5").innerHTML = dataFinal["results"][4]["title"];
            document.getElementById("summary5").innerHTML = dataFinal["results"][4]["summary"];
            document.getElementById("url5").innerHTML = dataFinal["results"][4]["sourceUrl"];
            
            document.getElementById("title6").innerHTML = dataFinal["results"][5]["title"];
            document.getElementById("summary6").innerHTML = dataFinal["results"][5]["summary"];
            document.getElementById("url6").innerHTML = dataFinal["results"][5]["sourceUrl"];
            
            document.getElementById("title7").innerHTML = dataFinal["results"][6]["title"];
            document.getElementById("summary7").innerHTML = dataFinal["results"][6]["summary"];
            document.getElementById("url7").innerHTML = dataFinal["results"][6]["sourceUrl"];
            
            document.getElementById("title8").innerHTML = dataFinal["results"][7]["title"];
            document.getElementById("summary8").innerHTML = dataFinal["results"][7]["summary"];
            document.getElementById("url8").innerHTML = dataFinal["results"][7]["sourceUrl"];
            
            document.getElementById("title9").innerHTML = dataFinal["results"][8]["title"];
            document.getElementById("summary9").innerHTML = dataFinal["results"][8]["summary"];
            document.getElementById("url9").innerHTML = dataFinal["results"][8]["sourceUrl"];
            
            document.getElementById("title10").innerHTML = dataFinal["results"][9]["title"];
            document.getElementById("summary10").innerHTML = dataFinal["results"][9]["summary"];
            document.getElementById("url10").innerHTML = dataFinal["results"][9]["sourceUrl"];
            
            document.getElementById("title11").innerHTML = dataFinal["results"][10]["title"];
            document.getElementById("summary11").innerHTML = dataFinal["results"][10]["summary"];
            document.getElementById("url11").innerHTML = dataFinal["results"][10]["sourceUrl"];
            
            //image = "dataFinal['results'][0]['image']";
            //document.write('<img src = "image">');
        }
    });
    var url = "https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/complexSearch?"
    + "query=" + search + "&" + "cuisine=" + cuisine + "&" + "diet=" + diet + "&instructionsRequired=true&addRecipeInformation=true"
    + allergiesFinal;
    xhr.open("GET", url);
    xhr.setRequestHeader("X-RapidAPI-Host", "spoonacular-recipe-food-nutrition-v1.p.rapidapi.com");
    xhr.setRequestHeader("X-RapidAPI-Key", "975da657a3msh06070dd41abb7f8p1c0484jsne21cb9e47bb5");
    
    xhr.send(data);
    

    }

        </script>
    </head>
    <body>
        <h1>Recipe Search</h1>
        <div style = "font-size: 25px;">
        <p class = "food"><label>Food Search: </label><input type = "text" name = 'foodSearch'/></p>
        <td class = "cuisine"><label>Cuisine Search (Optional): </label>
            <select name = 'cuisineSearch'/>
            <option disabled selected value> -- select an option -- </option>
            <option>African</option>
            <option>Chinese</option>
            <option>Japanese</option>
            <option>Korean</option>
            <option>Vietnamese</option>
            <option>Thai</option>
            <option>Indian</option>
            <option>British</option>
            <option>Irish</option>
            <option>French</option>
            <option>Italian</option>
            <option>Mexican</option>
            <option>Spanish</option>
            <option>Middle Eastern</option>
            <option>Jewish</option>
            <option>American</option>
            <option>Cajun</option>
            <option>Southern</option>
            <option>Greek</option>
            <option>German</option>
            <option>Nordic</option>
            <option>Eastern European</option>
            <option>Caribbean</option>
            <option>Latin American</option>
        </select>
        </td>
    </br>
    </br>
    </br>
        <input type = "radio" name = "allergy1" value = "dairy" id = "dairy"/>Dairy Allergy 
        <input type = "radio" name = "allergy2" value = "egg"id = "egg"/>Egg Allergy 
        <input type = "radio" name = "allergy3" value = "peanut" id = "peanut"/>Peanut Allergy 
        <input type = "radio" name = "allergy4" value = "sesame" id = "sesame"/>Sesame Allergy
        <input type = "radio" name = "allergy5" value = "seafood" id = "seafood"/>Seafood Allergy 
        <input type = "radio" name = "allergy6" value = "shellfish" id = "shellfish"/>Shellfish Allergy 
        <input type = "radio" name = "allergy7" value = "soy" id = "soy"/>Soy Allergy 
        <input type = "radio" name = "allergy8" value = "sulfite" id = "sulfite"/>Sulfite Allergy 
        <input type = "radio" name = "allergy9" value = "tree" id = "tree"/>Tree Nut Allergy 
        <input type = "radio" name = "allergy10" value = "wheat" id = "wheat"/>Wheat Allergy 
    </br>
    </br>
    </br>
    <td class = "diet"><label>Diet Search (Optional): </label>
        <select name = 'dietSearch'/>
        <option disabled selected value> -- select an option -- </option>
        <option>Pescetarian</option>
        <option>Vegan</option>
        <option>Paleo</option>
        <option>Vegetarian</option>
    </select>
</td>
</br>
</br>
</br>
<input type = "button" value = "Search for Recipes!" onclick = "start();"/>
            </div>
        <p class="title" id = "title1"></p>
        <p class='summary' id = "summary1"></p>
        <p class='url' id = "url1"></p>
        
        <p class="title" id = "title2"></p>
        <p class='summary' id = "summary2"></p>
        <p class='url'id = "url2" ></p>
        
        <p class="title" id = "title3" ></p>
        <p class='summary' id = "summary3" ></p>
        <p class='url' id = "url3" ></p>
        
        <p class="title" id = "title4" ></p>
        <p class='summary' id = "summary4" ></p>
        <p class='url' id = "url4" ></p>
        
        <p class="title" id = "title5" ></p>
        <p class='summary' id = "summary5" ></p>
        <p class='url' id = "url5" ></p>
        
        <p class="title" id = "title6" ></p>
        <p class='summary' id = "summary6" ></p>
        <p class='url'id = "url6" ></p>
        
        <p class="title" id = "title7" ></p>
        <p class='summary' id = "summary7" ></p>
        <p class='url' id = "url7" ></p>
        
        <p class="title" id = "title8" ></p>
        <p class='summary' id = "summary8" ></p>
        <p class='url' id = "url8" ></p>
        
        <p class="title" id = "title9" ></p>
        <p class='summary' id = "summary9" ></p>
        <p class='url' id = "url9" ></p>
        
        <p class="title" id = "title10" ></p>
        <p class='summary' id = "summary10" ></p>
        <p class='url' id = "url10" ></p>
        </body>
</html>
